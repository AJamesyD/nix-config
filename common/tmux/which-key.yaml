# yaml-language-server: $schema=config.schema.yaml
command_alias_start_index: 200
keybindings:
  # C-a opens which-key directly from root table (no prefix needed).
  # C-b (prefix2) still works for muscle-memory shortcuts that bypass the menu.
  root_table: C-a
  prefix_table: Space
title:
  style: align=centre,bold
  prefix: tmux
  prefix_style: fg=green,align=centre,bold
position:
  x: R
  y: P
custom_variables:
  - name: log_info
    value: "#[fg=green,italics] [info]#[default]#[italics]"
macros:
  - name: reload-config
    commands:
      - display "#{log_info} Loading config... "
      - source-file $HOME/.tmux.conf
      - display -p "\n\n... Press ENTER to continue"
  - name: restart-pane
    commands:
      - display "#{log_info} Restarting pane"
      - "respawnp -k -c #{pane_current_path}"
  - name: sesh-connect
    commands:
      - 'display-popup -E -w 40% -h 50% "sesh connect \"$(sesh list -i | gum filter --limit 1 --height 50)\""'
  - name: tmux-cheatsheet
    commands:
      - 'display-popup -E -w 80% -h 80% "tmux list-keys -N | less"'
  - name: smart-split
    commands:
      - "if-shell '[ #{pane_width} -gt $((#{pane_height} * 2)) ]' 'splitw -h -c \"#{pane_current_path}\"' 'splitw -v -c \"#{pane_current_path}\"'"
items:
  - name: Split horizontal
    key: "|"
    command: "splitw -h -c #{pane_current_path}"
  - name: Split vertical
    key: "-"
    command: "splitw -v -c #{pane_current_path}"
  - name: Last window
    key: tab
    command: last-window
  - name: New pane (smart)
    key: n
    macro: smart-split
  - name: Copy mode
    key: c
    command: copy-mode
  - separator: true
  - name: +Windows
    key: w
    menu:
      - name: Previous
        key: h
        command: previous-window
      - name: Next
        key: l
        command: next-window
      - name: New
        key: c
        command: "neww -c #{pane_current_path}"
      - name: Rename
        key: r
        command: command-prompt -I "#W" "renamew -- \"%%\""
      - name: Kill
        key: x
        command: 'confirm -p "Kill window #W? (y/n)" killw'
      - separator: true
      - name: "1"
        key: "1"
        command: select-window -t :1
      - name: "2"
        key: "2"
        command: select-window -t :2
      - name: "3"
        key: "3"
        command: select-window -t :3
      - name: "4"
        key: "4"
        command: select-window -t :4
      - name: "5"
        key: "5"
        command: select-window -t :5
      - name: "6"
        key: "6"
        command: select-window -t :6
      - name: "7"
        key: "7"
        command: select-window -t :7
      - name: "8"
        key: "8"
        command: select-window -t :8
      - name: "9"
        key: "9"
        command: select-window -t :9
  - name: +Panes
    key: p
    menu:
      - name: Zoom
        key: z
        command: resizep -Z
      - name: Kill
        key: x
        command: killp
      - name: Respawn
        key: R
        macro: restart-pane
      - separator: true
      - name: +Resize
        key: r
        menu:
          - name: Left
            key: h
            command: resizep -L
            transient: true
          - name: Down
            key: j
            command: resizep -D
            transient: true
          - name: Up
            key: k
            command: resizep -U
            transient: true
          - name: Right
            key: l
            command: resizep -R
            transient: true
  - name: +Sessions
    key: s
    menu:
      - name: Sesh (fuzzy)
        key: f
        macro: sesh-connect
      - name: Detach
        key: d
        command: detach
  - separator: true
  - name: Cheatsheet
    key: "/"
    macro: tmux-cheatsheet
